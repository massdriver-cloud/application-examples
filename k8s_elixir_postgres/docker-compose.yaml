version: "3"

services:
  # https://www.stackbuilders.com/blog/todo-with-postgresql-cdc-phoenix/
  # https://hexdocs.pm/phoenix/ecto.html
  database:
    image: postgres:latest
    environment:
      - POSTGRES_USER=some_user
      - POSTGRES_PASSWORD=some_password
    # volumes:
    #   - ./postgres-data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
  web:
    build:
      dockerfile: Dockerfile
    environment:
      - PGUSER=some_user
      - PGPASSWORD=some_password
      - PGDATABASE=some_database
      - PGPORT=5432
      - PGHOST=database
    ports:
      - "4000:4000"
    depends_on:
      - database
